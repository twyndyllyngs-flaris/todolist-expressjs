<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Todo Express</title>
    <link rel="stylesheet" href="../public/index.css" type="text/css" />
  </head>

  <body class="bg-[#f5f5f5]">
    
    <div class="flex flex-col items-center py-14">
        <div class="w-[600px] flex flex-col">
            <form action="/" method="POST" class=" w-full flex justify-between mb-10">
                <input required type="text" class="bg-[#fff] w-[80%] h-[35px] px-3" name="title"/>
                <button name="add" class="bg-[#bf225a] w-[15%] text-[#fff] uppercase font-extrabold">Add</button>
            </form>
            
            <% todos.forEach(todos => { %>
              <form class="bg-[#fff] flex justify-between px-5 shadow-md mt-3 min-h-[100px]" action="/" method="POST">
                <% if(todos.isDone === true) { %>
                  <input type="checkbox" name="status" value="1" id="dasdasd" onChange="this.form.submit()"  checked class="w-5"/>
                  <input type='hidden' value='<%= todos._id %>' name='item'>
                <div class="flex flex-col items-center grow-[1]">
                    <h3 class="line-through"><%= todos.title %></h3>
                    <h5 class="w-fit"><%= todos.createdAt.toLocaleDateString("en-GB", {
                     year: "numeric",
                      month: "2-digit",
                      day: "2-digit"
                    }) %></h5>
                </div>
                <% } else { %>
                  <input type="checkbox" name="status" value="0" id="dasdasd" onChange="this.form.submit()" class="w-5"/>
                  <input type='hidden' value='<%= todos._id %>' name='item'>
                    <div class="flex flex-col items-center grow-[1]">
                        <h3 class=""><%= todos.title %></h3>
                        <h5 class="w-fit"><%= todos.createdAt.toLocaleDateString("en-GB", {
                         year: "numeric",
                          month: "2-digit",
                          day: "2-digit"
                        }) %></h5>
                    </div>
                <% } %>
                <div>x</div>
              </form>
            <% }) %>
            
        </div>
    </div>

    <script type="text/javascript"> 
      let json = JSON.parse('<%- JSON.stringify(todos) %>')
    </script>

    <script src="/public/index.js"></script>
  </body>
</html>
